<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>英語並び替え10問クイズ</title>
  <style>
body {
  font-family: sans-serif;
  padding: 20px;
  max-width: 100%;
  box-sizing: border-box;
}

.word-bank, .sentence-box {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
  justify-content: center;
}

.word {
  border: 1px solid #aaa;
  padding: 8px 12px;
  background: #e0f7fa;
  cursor: move;
  border-radius: 5px;
  font-size: 16px;
  white-space: nowrap;
}

.slot {
  border: 2px dashed #ccc;
  min-width: 60px;
  min-height: 30px;
  padding: 10px;
  text-align: center;
  background: #fff;
  border-radius: 5px;
  box-sizing: border-box;
  word-break: break-word;
  flex-shrink: 0;
}

button {
  font-size: 16px;
  padding: 8px 16px;
  margin: 5px;
}

    .correct {
  background-color: #c8e6c9; /* 薄い緑 */
}
.incorrect {
  background-color: #ffcdd2; /* 薄い赤 */
}
  </style>
</head>
<body>

<h2 id="questionTitle">🧩 英文並び替えクイズ（1問目）</h2>

<div class="sentence-box" id="sentenceBox"></div>
<div class="word-bank" id="wordBank"></div>

<button onclick="playAudio()">▶ 音声を再生する</button>
<button onclick="nextQuestion()" style="display: none;" id="nextBtn">➡ 次の問題へ</button>
<button onclick="skipQuestion()" id="skipBtn">⏭ SKIP</button>

<p id="correctAnswer" style="font-weight: bold; color: green; margin-top: 10px;"></p>

<audio id="voicePlayer">
  <source id="audioSource" src="" type="audio/mpeg">
</audio>

<script>
const sentences = [
  "Did you go to the concert last night? The band played so well!",
  "I heard a new song yesterday, and I can’t stop humming it.",
  "Have you ever played a musical instrument? I learned to play the piano last year.",
  "Who sang that song? Their voice is amazing!",
  "I went to a live show with my friends, and we danced all night.",
  "Did you bring your guitar? We can play some songs together.",
  "I saw a street musician yesterday, and they played a beautiful tune.",
  "Have you been to the new music festival? It was so much fun!",
  "I met a famous singer once, and he was so friendly.",
  "We talked about our favorite bands and found out we like the same one."
];


  let current = 0;

  function loadQuestion(index) {
    document.getElementById("sentenceBox").innerHTML = "";
    document.getElementById("wordBank").innerHTML = "";
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("questionTitle").innerText = `🧩 英文並び替えクイズ（${index + 1}問目）`;

    const sentence = sentences[index];
    const words = sentence.split(" ");
    const shuffled = [...words].sort(() => Math.random() - 0.5);

    // スロットを表示
    for (let i = 0; i < words.length; i++) {
      const slot = document.createElement("div");
      slot.className = "slot";
      slot.ondrop = drop;
      slot.ondragover = allowDrop;
      slot.dataset.expected = words[i];
      slot.onclick = () => checkCompletion();
      document.getElementById("sentenceBox").appendChild(slot);
    }

    // 単語を追加
    for (let i = 0; i < shuffled.length; i++) {
      const word = document.createElement("div");
      word.className = "word";
      word.draggable = true;
      word.id = `word${index}_${i}`;
      word.innerText = shuffled[i];
      word.ondragstart = drag;
      document.getElementById("wordBank").appendChild(word);
    }

// 音声ファイルを切り替え
const audio = document.getElementById("audioSource");
audio.src = `22-${index + 1}.mp3`;
document.getElementById("voicePlayer").load();

  }

  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
  }

  function drop(ev) {
    ev.preventDefault();
    const wordId = ev.dataTransfer.getData("text");
    const word = document.getElementById(wordId);
    if (!ev.target.hasChildNodes()) {
      ev.target.appendChild(word);
      checkCompletion();
    }
  }

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>英語並べ替えクイズ (スマホ完全対応)</title>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 100%;
      box-sizing: border-box;
      background: linear-gradient(to bottom, #fff0f5, #fdfdff);
    }
    ul {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      padding: 0;
      margin-bottom: 20px;
      list-style: none;
      justify-content: center;
    }
    li {
      padding: 10px 14px;
      background: #e0f7fa;
      border: 1px solid #aaa;
      border-radius: 5px;
      font-size: 16px;
      cursor: grab;
    }
    .correct {
      background-color: #c8e6c9;
    }
    .incorrect {
      background-color: #ffcdd2;
    }
    button {
      font-size: 16px;
      padding: 8px 16px;
      margin: 5px;
      background-color: #fce4ec;
      border: none;
      border-radius: 8px;
      color: #333;
    }
    #correctAnswer {
      font-weight: bold;
      color: green;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h2 id="questionTitle">🎩 英文並べ替えクイズ（1問目）</h2>

<ul id="sentenceBox"></ul>
<ul id="wordBank"></ul>

<button onclick="playAudio()">▶ 音声を再生する</button>
<button onclick="nextQuestion()" style="display:none;" id="nextBtn">➡ 次の問題へ</button>
<button onclick="skipQuestion()">⏭ SKIP</button>

<p id="correctAnswer"></p>

<audio id="voicePlayer">
  <source id="audioSource" src="" type="audio/mpeg">
</audio>

<script>
const sentences = [
  "Did you go to the concert last night? The band played so well!",
  "I heard a new song yesterday, and I can’t stop humming it.",
  "Have you ever played a musical instrument? I learned to play the piano last year.",
  "Who sang that song? Their voice is amazing!",
  "I went to a live show with my friends, and we danced all night.",
  "Did you bring your guitar? We can play some songs together.",
  "I saw a street musician yesterday, and they played a beautiful tune.",
  "Have you been to the new music festival? It was so much fun!",
  "I met a famous singer once, and he was so friendly.",
  "We talked about our favorite bands and found out we like the same one."
];

let current = 0;

function loadQuestion(index) {
  document.getElementById("sentenceBox").innerHTML = "";
  document.getElementById("wordBank").innerHTML = "";
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("correctAnswer").textContent = "";
  document.getElementById("questionTitle").innerText = `🎩 英文並べ替えクイズ（${index + 1}問目）`;

  const sentence = sentences[index];
  const words = sentence.split(" ");
  const shuffled = [...words].sort(() => Math.random() - 0.5);

  for (let word of shuffled) {
    const li = document.createElement("li");
    li.textContent = word;
    document.getElementById("wordBank").appendChild(li);
  }

  // 空のスロットを作成（あとで入れ替え用）
  for (let i = 0; i < words.length; i++) {
    const li = document.createElement("li");
    li.textContent = "";
    document.getElementById("sentenceBox").appendChild(li);
  }

  new Sortable(wordBank, {
    group: "shared",
    animation: 150
  });

  new Sortable(sentenceBox, {
    group: "shared",
    animation: 150,
    onSort: function () {
      checkCompletion();
    }
  });

  const audio = document.getElementById("audioSource");
  audio.src = `22-${index + 1}.mp3`;
  document.getElementById("voicePlayer").load();
}

function checkCompletion() {
  const slots = document.querySelectorAll("#sentenceBox li");
  const currentSentence = sentences[current].split(" ");
  let correct = true;

  slots.forEach((slot, i) => {
    if (!slot.textContent) {
      slot.classList.remove("correct", "incorrect");
      correct = false;
    } else if (slot.textContent === currentSentence[i]) {
      slot.classList.add("correct");
      slot.classList.remove("incorrect");
    } else {
      slot.classList.add("incorrect");
      slot.classList.remove("correct");
      correct = false;
    }
  });

  document.getElementById("nextBtn").style.display = correct ? "inline-block" : "none";
}

function playAudio() {
  document.getElementById("voicePlayer").play();
}

function nextQuestion() {
  current++;
  if (current < sentences.length) {
    loadQuestion(current);
  } else {
    document.body.innerHTML = "<h2>🎉 全問編結！お疲れさまでした！</h2>";
  }
}

function skipQuestion() {
  const correct = sentences[current];
  document.getElementById("correctAnswer").textContent = "✔ 正解: " + correct;
  setTimeout(() => {
    current++;
    if (current < sentences.length) {
      loadQuestion(current);
    } else {
      document.body.innerHTML = "<h2>🎉 全問編結！お疲れさまでした！</h2>";
    }
  }, 5000);
}

loadQuestion(current);
</script>
</body>
</html>


  function playAudio() {
    const audio = document.getElementById("voicePlayer");
    audio.play();
  }

  function nextQuestion() {
    current++;
    if (current < sentences.length) {
      loadQuestion(current);
    } else {
      document.body.innerHTML = "<h2>🎉 全部終わりました！お疲れさまでした！</h2>";
    }
  }
  
 function skipQuestion() {
  // 正解文を取得
  const correct = sentences[current];

  // 正解を画面に表示
  const answerDisplay = document.getElementById("correctAnswer");
  answerDisplay.textContent = "✔ 正解: " + correct;

  // 3秒後に次の問題へ自動で進む
  setTimeout(() => {
    current++;
    if (current < sentences.length) {
      answerDisplay.textContent = ""; // 表示をリセット
      loadQuestion(current);
    } else {
      document.body.innerHTML = "<h2>🎉 全部終わりました！お疲れさまでした！</h2>";
    }
  }, 3000);
}

  // 最初の問題を読み込み
  loadQuestion(current);
</script>

</body>
</html>
